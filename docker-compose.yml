version: '3.8'

services:
  blockchain-integration-service:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: blockchain-integration-service
    restart: unless-stopped
    ports:
      - "${PORT:-3000}:3000"
    environment:
      - NODE_ENV=${NODE_ENV:-production}
      - PORT=${PORT:-3000}
      - LOG_LEVEL=${LOG_LEVEL:-info}
      - TRANSACTION_AMOUNT_DELTA=${TRANSACTION_AMOUNT_DELTA:-0.001}
      - TRANSACTION_TIME_THRESHOLD=${TRANSACTION_TIME_THRESHOLD:-3600}
      
      # EVM Networks
      - MAINNET_RPC_URL=${MAINNET_RPC_URL}
      - POLYGON_RPC_URL=${POLYGON_RPC_URL}
      - OPTIMISM_RPC_URL=${OPTIMISM_RPC_URL}
      - ARBITRUM_RPC_URL=${ARBITRUM_RPC_URL}
      - GNOSIS_RPC_URL=${GNOSIS_RPC_URL}
      - CELO_RPC_URL=${CELO_RPC_URL}
      - BASE_RPC_URL=${BASE_RPC_URL}
      - BSC_RPC_URL=${BSC_RPC_URL}
      - AVALANCHE_RPC_URL=${AVALANCHE_RPC_URL}
      
      # Solana
      - SOLANA_RPC_URL=${SOLANA_RPC_URL}
      - SOLANA_CHAIN_ID=${SOLANA_CHAIN_ID:-101}
    
    networks:
      - blockchain-network

networks:
  blockchain-network:
    driver: bridge

